# Berga CLI

A cross-platform personal CLI utility for managing scripts, configurations, and automation tasks.

## Features

- 🚀 **Script Management**: Store, execute, and manage your personal scripts
- 📋 **Template System**: Create and apply configuration templates with variable substitution
- ⚙️ **Configuration Management**: Centralized configuration with YAML support
- 🔧 **Cross-platform**: Works on Windows, macOS, and Linux
- 🎯 **Easy Installation**: Single binary with simple installation process

## Installation

### 🚀 One-Line Install (Recommended)

**Linux/macOS:**
```bash
curl -sSL https://raw.githubusercontent.com/bergaaberg/berga/main/install/install.sh | bash
```

**Windows (PowerShell):**
```powershell
iwr -useb https://raw.githubusercontent.com/bergaaberg/berga/main/install/install.ps1 | iex
```

### 📦 Download from Releases

1. Go to [Releases](https://github.com/bergaaberg/berga/releases)
2. Download the binary for your platform:
   - `berga-windows-amd64.exe` (Windows 64-bit)
   - `berga-darwin-amd64` (macOS Intel)
   - `berga-darwin-arm64` (macOS Apple Silicon)
   - `berga-linux-amd64` (Linux 64-bit)
3. Make executable and add to PATH

### 🛠️ Build from Source

**Prerequisites:** Go 1.25 or later

```bash
# Clone the repository
git clone https://github.com/bergaaberg/berga.git
cd berga

# Build for your platform
make build

# Install globally
make install

# Or for development (creates a symlink)
make dev-install
```

## Quick Start

1. **Initialize berga configuration:**
   ```bash
   berga config init
   ```

2. **List available commands:**
   ```bash
   berga help
   ```

3. **List your scripts:**
   ```bash
   berga script list
   ```

4. **Run a script:**
   ```bash
   berga script run hello
   ```

## Usage

### Configuration

```bash
# Initialize berga (creates ~/.berga directory and config files)
berga config init

# Show current configuration
berga config show

# Show configuration paths
berga config path
```

### Script Management

```bash
# List all scripts
berga script list
berga s ls              # Short alias

# Run a script
berga script run myscript.sh arg1 arg2
berga s run myscript.sh arg1 arg2

# Show script content
berga script show myscript.sh

# Edit a script
berga script edit myscript.sh
```

### Template Management

```bash
# List templates
berga template list
berga t ls              # Short alias

# Apply a template
berga template apply gitignore .gitignore

# Show template content
berga template show gitignore

# Edit a template
berga template edit gitignore
```

## Directory Structure

Berga creates the following directory structure in your home directory:

```
~/.berga/
├── config.yaml        # Main configuration file
├── scripts/           # Your personal scripts
│   └── hello.sh      # Example script
└── templates/        # Configuration templates
    └── gitignore.tmpl # Example template
```

## Configuration File

The configuration file is located at `~/.berga/config.yaml`:

```yaml
# Default editor for editing scripts and configs
editor: "code"

# Default shell for script execution
shell: "bash"

# Script execution settings
scripts:
  timeout: 300  # seconds
  verbose: false

# Template settings
templates:
  author: "Your Name"
  email: "your.email@example.com"

# Aliases for frequently used commands
aliases: {}
```

## Templates

Templates use Go's text/template syntax. Example template:

```bash
# {{.ProjectName}} - Generated by berga
# Author: {{.Author}}

# Logs
*.log

# Dependencies
node_modules/
vendor/

# Build artifacts
dist/
build/
```

Variables available in templates:
- `{{.ProjectName}}` - Current directory name or specified project name
- `{{.Author}}` - Author from config or prompted input
- `{{.Email}}` - Email from config
- `{{.CurrentDir}}` - Current directory name
- Custom variables can be added interactively

## Scripts

Scripts can be any executable file placed in the `~/.berga/scripts/` directory:

- Bash scripts (`.sh`)
- PowerShell scripts (`.ps1`)
- Python scripts (`.py`)
- Batch files (`.bat`, `.cmd`)
- Any executable binary

The CLI automatically detects the script type and executes it with the appropriate interpreter.

## Global Flags

- `-v, --verbose`: Enable verbose output
- `--config string`: Specify custom config file path

## Development

### Building

```bash
# Build for current platform
make build

# Build for all platforms
make build-all

# Run without building
make run

# Run tests
make test

# Format code
make fmt

# Clean build artifacts
make clean
```

### Project Structure

```
berga/
├── cmd/                # Command implementations
│   ├── root.go        # Root command and CLI setup
│   ├── config.go      # Configuration management
│   ├── script.go      # Script management
│   └── template.go    # Template management
├── internal/          # Internal packages (future use)
├── configs/           # Example configs
├── scripts/           # Example scripts
├── templates/         # Example templates
├── main.go           # Application entry point
├── go.mod            # Go module file
├── Makefile          # Build automation
└── README.md         # This file
```

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Run tests: `make test`
5. Format code: `make fmt`
6. Submit a pull request

## License

MIT License - see LICENSE file for details.
